{% extends 'hpv/base.html' %}
{% load staticfiles %}

<head>
    <meta charset="utf-8">
    <title>HPV Data</title>
</head>

{% block content %}
{% if user.is_authenticated %}
<nav class="navbar navbar-default">
  <div class="navbar-header">
    <b><a class="navbar-brand" href="/hpv/">Daimler</a></b>
    <ul class="nav navbar-nav navbar-right">
      <button class="navbar-toggler" type="button" data-toggle="dropdown" data-target="#exCollapsingNavbar">
      &#9776;
      </button>
      <ul class="dropdown-menu">
        <li><center><b>Signed in as {{user.username}} </b></center></li>
        <li role="separator" class="divider"></li>
        <li><a href="{% url 'logout' %}">Logout</a></li>
      </ul>
    </ul>
  </div>
</nav>
{% endif %}

<div class="container">
  <p>
    {{dripper_time}}
  </p>
  <div class="row">
    <div class="col-sm-12 col-md-5">
      <h3>HPV</h3>
      <table id=hpv>
        <tr class=head>
          <th class=head>Department</th>
          {% if shift_3 %}
          <th class=head>Shift 3</th>
          {% endif %}
          <th class=head>Shift 1</th>
          <th class=head>Shift 2</th>
          <th class=head>Day</th>
        </tr>
        {% for name, dept in depts.items %}
        <tr>
          <td class="dept"><a href="/heatmap/{{ name }}" >{{ name }}</a></td>
          {% if shift_3 %}
          <td>{{ dept.s3_hpv }}</td>
          {% endif %}
          <td>{{ dept.s1_hpv }}</td>
          <td>{{ dept.s2_hpv }}</td>
          <td>{{ dept.d_hpv }}</td>
        </tr>
        {% endfor %}
        <tr>
          <td class="dept">CLAIMS</td>
          {% if shift_3 %}
          <td>{{ s3_claims }}</td>
          {% endif %}
          <td>{{ s1_claims }}</td>
          <td>{{ s2_claims }}</td>
          <td>{{ claims_d }}</td>
        </tr>
      </table>
    </div>

    <div class="col-sm-12 col-md-7">
      <div id='linegraph'>
        <svg style='height:300px'> </svg>
      </div>
      <script src='{% static "hpv/graph.js" %}' type='text/javascript'> </script>

      <!-- <script type='text/javascript'>
        d3.text("{% static "hpv/graph.js" %}","text/plain",function(err,text) {
            d3.select("pre.prettyprint").text(text);
        });
      </script> -->
    </div>
  </div>

  <!-- <div class="row">
    {% if shift_3 %}
    <div class="col-xs-4 col-md-4">
    {% else %}
    <div class="col-xs-12 col-md-6">
    {% endif %}
      <h3>Shift 1 Attendance</h3>
      <table id=hpv>
        <tr class=head>
          <th class=head>Department</td>
          <th class=head>Hr 1</th>
          <th class=head>Hr 2</th>
          <th class=head>Hr 3</th>
          <th class=head>Hr 4</th>
          <th class=head>Hr 5</th>
          <th class=head>Hr 6</th>
          <th class=head>Hr 7</th>
          <th class=head>Hr 8</th>
        </tr>
      {% for department in shift1_attendance %}
      <tr>
        {% for entry in department %}
        <td {% if forloop.first %} class="dept">{{ entry }}{% else %}>
          {{ entry|floatformat }}
          {% endif %}
        </td>
        {% endfor %}
      </tr>
      {% endfor %}
      </table>
    </div>

      {% if shift_3 %}
      <div class="col-xs-4 col-md-4">
      {% else %}
      <div class="col-xs-12 col-md-6">
      {% endif %}
        <h3>Shift 2 Attendance</h3>
        <table id=hpv>
          <tr class=head>
            <th class=head>Department</th>
            <th class=head>Hr 1</th>
            <th class=head>Hr 2</th>
            <th class=head>Hr 3</th>
            <th class=head>Hr 4</th>
            <th class=head>Hr 5</th>
            <th class=head>Hr 6</th>
            <th class=head>Hr 7</th>
            <th class=head>Hr 8</th>
          </tr>
        {% for department in shift2_attendance %}
        <tr>
          {% for entry in department %}
          <td {% if forloop.first %} class="dept">{{ entry }}{% else %}>
            {{ entry|floatformat }}
            {% endif %}
          </td>
          {% endfor %}
        </tr>
        {% endfor %}
        </table>
      </div>


        {% if shift_3 %}
        <div class="col-xs-4 col-md-4">
          <h3>Shift 3 Attendance</h3>
          <table id=hpv>
            <tr class=head>
              <th class=head>Department</th>
              <th class=head>Hr 1</th>
              <th class=head>Hr 2</th>
              <th class=head>Hr 3</th>
              <th class=head>Hr 4</th>
              <th class=head>Hr 5</th>
              <th class=head>Hr 6</th>
              <th class=head>Hr 7</th>
              <th class=head>Hr 8</th>
            </tr>
          {% for department in shift3_attendance %}
          <tr>
            {% for entry in department %}
            <td {% if forloop.first %} class="dept">{{ entry }}{% else %}>
              {{ entry|floatformat }}
              {% endif %}
            </td>
            {% endfor %}
          </tr>
          {% endfor %}
          </table>
        </div>
        {% endif %} -->


  <!-- <div class="row">
    <div class="col-xs-12 col-md-6"> -->
      <!-- <h3 id=shift1_title>Shift 1</h3>
      <table id=shift1_attendance>
        <tr class=head>
          <td class=head><b>Department</b></td>
          <td class=head><b>Hr 1</b></td>
          <td class=head><b>Hr 2</b></td>
          <td class=head><b>Hr 3</b></td>
          <td class=head><b>Hr 4</b></td>
          <td class=head><b>Hr 5</b></td>
          <td class=head><b>Hr 6</b></td>
          <td class=head><b>Hr 7</b></td>
          <td class=head><b>Hr 8</b></td>
        </tr>
        {% for department in shift_1 %}
          <tr>
            {% for entry in department %}
              <td{% if forloop.first %} class="dept"{% endif %}>
                {{entry}}
              </td>
            {% endfor %}
          </tr>
        {% endfor %}
      </table> -->
    <!-- </div>

    <div class="col-xs-12 col-md-6"> -->
      <!-- <h3 id=shift2_title>Shift 2</h3>
      <table id=shift2_attendance>
      <tr class=head>
        <td class=head><b>Department</b></td>
        <td class=head><b>Hr 1</b></td>
        <td class=head><b>Hr 2</b></td>
        <td class=head><b>Hr 3</b></td>
        <td class=head><b>Hr 4</b></td>
        <td class=head><b>Hr 5</b></td>
        <td class=head><b>Hr 6</b></td>
        <td class=head><b>Hr 7</b></td>
        <td class=head><b>Hr 8</b></td>
      </tr>
      {% for department in shift_2 %}
        <tr>
          {% for entry in department %}
            <td{% if forloop.first %} class="dept"{% endif %}>
              {{entry}}
            </td>
          {% endfor %}
        </tr>
      {% endfor %}
      </table> -->
    <!-- </div>
  </div> -->
  <div class="row">
    <div class="col-xs-12">
      <center>
      <h3> Total Count: {{ claims_d }} |  Total HPV: {{ depts.PLANT.d_hpv|floatformat }}</h3>
      </center>
    </div>
  </div>

</div>
<!-- <meta http-equiv="refresh" content="2"> -->
{% endblock %}
